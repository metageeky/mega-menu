<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">

	<title>Accessible Mega Menu</title>

	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/local.css">
	<link rel="stylesheet" href="css/mega-menu-styles.css">
	<script src="js/mega-menu.js"></script>
	
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" >
	<link rel="stylesheet" href="css/prism-visual-studio.css" >
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js" integrity="sha512-YBk7HhgDZvBxmtOfUdvX0z8IH2d10Hp3aEygaMNhtF8fSOvBZ16D/1bXZTJV6ndk/L/DlXxYStP8jrF77v2MIg==" crossorigin="anonymous"></script>

</head>

<body tabindex="-1">
	<div id="hiddenStuff" aria-hidden="true">
		<svg aria-hidden="true" focusable="false" id="icons" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
			<symbol id="icon-right-triangle" viewBox="0 0 50 50">
				<polygon points="0,0 0,50 43.3,25" style="fill:currentColor;stroke:currentColor;stroke-width:1">
				</polygon>
			</symbol>
			<symbol id="icon-left-triangle" viewBox="0 0 50 50">
				<polygon points="50,0 50,50 6.6,25" style="fill:currentColor;stroke:currentColor;stroke-width:1">
				</polygon>
			</symbol>
			<symbol id="icon-up-triangle" viewBox="0 0 50 50">
				<polygon points="0,50 50,50 25.0,6.7" style="fill:currentColor;stroke:currentColor;stroke-width:1">
				</polygon>
			</symbol>
			<symbol id="icon-down-triangle" viewBox="0 0 50 43.3">
				<polygon points="0,0 50,0 25.0,43.3" style="fill:currentColor;stroke:currentColor;stroke-width:1">
				</polygon>
			</symbol>
			<symbol id="icon-menu" viewBox="0 0 512 512">
				<path style="fill:currentColor" d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"/>
			</symbol>
			<symbol id="icon-link" viewBox="0 0 32 32" xml:space="preserve">
				<g stroke="currentColor" fill="currentColor" >
					<path d="M11 5v6H5v2h6v6H5v2h6v6h2v-6h6v6h2v-6h6v-2h-6v-6h6v-2h-6V5h-2v6h-6V5zm2 8h6v6h-6z"/>
				</g>
			</symbol>
			<symbol id="icon-github" viewBox="0 0 16 16">
				<path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
			</symbol>
			<symbol id="icon-twitter" viewBox="0 0 48 48">
				<circle cx="24" cy="24" fill="#fff" r="24"/>
				<path d="M36.8 15.4c-.9.5-2 .8-3 .9 1.1-.7 1.9-1.8 2.3-3.1-1 .6-2.1 1.1-3.4 1.4-1-1.1-2.3-1.8-3.8-1.8-2.9 0-5.3 2.5-5.3 5.7 0 .4 0 .9.1 1.3-4.4-.2-8.3-2.5-10.9-5.9-.5.8-.7 1.8-.7 2.9 0 2 .9 3.7 2.3 4.7-.9 0-1.7-.3-2.4-.7v.1c0 2.7 1.8 5 4.2 5.6-.4.1-.9.2-1.4.2-.3 0-.7 0-1-.1.7 2.3 2.6 3.9 4.9 3.9-1.8 1.5-4.1 2.4-6.5 2.4-.4 0-.8 0-1.3-.1 2.3 1.6 5.1 2.6 8.1 2.6 9.7 0 15-8.6 15-16.1v-.7c1.2-1 2.1-2 2.8-3.2z" fill="#000"/>
			</symbol>
		</svg>
	</div>

	<header>
		<banner>
			<a class="skipnavlink offscreen" href="#main">
				Skip to main content
			</a>
			<div class="page-centered-content">
				<div id="logo-container">
					<img alt="Syracuse University Libraries" id="logo" src="assets/logo.svg">
				</div>
			</div>
			
			<h2 id="main-nav-heading" class="offscreen">
				Main Navigation
			</h2>
			
			<div class="main-navigation">
				<nav id="main-nav" class="mega-menu page-centered-content " aria-labelledby="main-nav-heading" data-menu-state="closed" data-responsive-width="900px">
					<button class="responsive-toggle" aria-expanded="false">
						<svg focusable="false" ><use xlink:href="#icon-menu"></use></svg>
						Menu
					</button>
					<ul>
						<li>
							<button aria-expanded="false" class="mega-menu-toggle">
								Services and Support
								<svg focusable="false" class="icon down"><use xlink:href="#icon-down-triangle"></use></svg>
								<svg focusable="false" class="icon up"><use xlink:href="#icon-up-triangle"></use></svg>
							</button>
							<div class="mega-sub-menu" tabindex="-1">
								<ul>
									<li class="image-column">
										<a href="">
											<img src="https://loremflickr.com/200/160/cat?random=473" alt="random cat"/>
											<div>Look a Cat!!!</div>
										</a>
									</li>							
									<li class="image-column">
										<a href="">
											<img src="https://loremflickr.com/200/160/cat?random=43" alt="random cat"/>
											<div>Look a Cat!!!</div>
										</a>
									</li>
									<li class="text-column">
										<div class="mega-sub-heading">Services</div>
										<ul class="mega-menu-bulleted">
											<li><a href="">Borrow Laptops and Gear</a></li>
											<li><a href="">Borrowing Process and Policies</a></li>
											<li><a href="">Course Reserves</a></li>
											<li><a href="">Interlibrary Loan</a></li>
											<li><a href="">Delivery Services</a></li>
											<li><a href="">Request Forms</a></li>
											<li><a href="">Suggest a Title</a></li>
											<li><a href="">University Records Management</a></li>
											<li><a href="">Special Collections Research Center</a></li>
											<li><a href="">Instructional Services</a></li>
										</ul>
									</li>
									<li class="text-column">
										<div class="mega-sub-heading">Help</div>
										<ul class="mega-menu-bulleted">
											<li><a href="">Accessibility and Disability Services</a></li>
											<li><a href="">Printing and Technology</a></li>
											<li><a href="">Connecting from Off-Campus</a></li>
											<li><a href="">Onsite Help at Bird Library</a></li>
											<li><a href="">Trouble with a Resource</a></li>
											<li><a href="">Help with Summon</a></li>
											<li><a href="">Subject Librarians</a></li>
											<li><a href="">Entreprenurial Help</a></li>
										</ul>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<button aria-expanded="false" class="mega-menu-toggle">
								Visit and Study
								<svg focusable="false" class="icon down"><use xlink:href="#icon-down-triangle"></use></svg>
								<svg focusable="false" class="icon up"><use xlink:href="#icon-up-triangle"></use></svg>
							</button>
							<div class="mega-sub-menu" tabindex="-1">
								<ul>
									<li class="image-column">
										<a href="">
											<img src="https://loremflickr.com/160/100/cat?random=1" alt="random cat"/>
											<div>Look a Cat!!!</div>
										</a>
									</li>
									<li class="text-column">
										<div class="mega-sub-heading">Spaces</div>
										<ul class="mega-menu-bulleted">
											<li><a href="">Floor Maps</a></li>
											<li><a href="">Service Desks</a></li>
											<li><a href="">Pages Cafe</a></li>
											<li><a href="">Study and Meeting Spaces</a></li>
											<li><a href="">Blackstone LaunchPad</a></li>
											<li><a href="">Faculty Research Commons</a></li>
										</ul>
									</li>
									<li class="text-column">
										<div class="mega-sub-heading">Libraries</div>
										<ul class="mega-menu-bulleted">
											<li><a href="">Bird Library</a></li>
											<li><a href="">Carnegie Library</a></li>
											<li><a href="">King + King Library</a></li>
											<li><a href="">SU College of Law Library</a></li>
											<li><a href="">Martin Luther King Jr. Library</a></li>
											<li><a href="">F. Franklin Moon Library (ESF)</a></li>
											<li><a href="">Special Collections Research Center</a></li>
										</ul>
									</li>
									<li class="text-column">
										<div class="mega-sub-heading">Partners</div>
										<ul class="mega-menu-bulleted">
											<li><a href="">Center for Learning and Student Success (CLASS)</a></li>
											<li><a href="">Syracuse Abroad @ Bird</a></li>
											<li><a href="">Syracuse Office of Undergraduate Research and Creative Engagement (SOURCE)</a></li>
											<li><a href="">Digital Scholarship Space (DSS)</a></li>
											<li><a href="">Center for Teaching and Learning Excellence</a></li>
										</ul>								
									</li>
								</ul>
							</div>
						</li>
						<li>
							<button aria-expanded="false" class="mega-menu-toggle">
								Research
								<svg focusable="false" class="icon down"><use xlink:href="#icon-down-triangle"></use></svg>
								<svg focusable="false" class="icon up"><use xlink:href="#icon-up-triangle"></use></svg>
							</button>
							<div class="mega-sub-menu" tabindex="-1">
								<ul>
									<li class="image-column">
										<a href="">
											<img src="https://loremflickr.com/160/100/cat?random=4" alt="random cat"/>
											<div>Look a Cat!!!</div>
										</a>
									</li>
									<li class="image-column">
										<a href="">
											<img src="https://loremflickr.com/160/100/cat?random=5" alt="random cat"/>
											<div>Look a Cat!!!</div>
										</a>
									</li>
									<li class="text-column">
										<div class="mega-sub-heading">Research Support</div>
										<ul class="mega-menu-bulleted">
											<li><a href="">General Research</a></li>
											<li><a href="">In-Depth Research</a></li>
											<li><a href="">Research and Course Guides</a></li>
											<li><a href="">Subject Areas</a></li>
											<li><a href="">Research Process</a></li>
											<li><a href="">Subject Librarians</a></li>
											<li><a href="">Special Collections Research Center</a></li>
										</ul>
									</li>
									<li class="text-column">
										<div class="mega-sub-heading">Services and Tools</div>
										<ul class="mega-menu-bulleted">
											<li><a href="">Workshops</a></li>
											<li><a href="">Citing Sources</a></li>
											<li><a href="">Citation Management Tools</a></li>
											<li><a href="">Experts@Syracuse</a></li>
											<li><a href="">Research Data Services</a></li>
											<li><a href="">Writing Center</a></li>
											<li><a href="">Plagiarism Checker</a></li>
											<li><a href="">SU Press</a></li>
										</ul>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<button aria-expanded="false" class="mega-menu-toggle">
								Collections
								<svg focusable="false" class="icon down"><use xlink:href="#icon-down-triangle"></use></svg>
								<svg focusable="false" class="icon up"><use xlink:href="#icon-up-triangle"></use></svg>
							</button>
							<div class="mega-sub-menu" tabindex="-1">
								<ul>
									<li class="text-column">
										<div class="mega-sub-heading">Special Collections Research Center</div>
										<ul class="mega-menu-bulleted">
											<li><a href="">Collection Areas</a></li>
											<li><a href="">Digital Collections</a></li>
											<li><a href="">Pan Am 103</a></li>
											<li><a href="">University Archives</a></li>
											<li><a href="">Search the Collections</a></li>
										</ul>
									</li>
									<li class="text-column double">
										<div class="mega-sub-heading">General</div>
										<ul class="mega-menu-bulleted">
											<li><a href="">Ebooks</a></li>
											<li><a href="">Journals</a></li>
											<li><a href="">Databases</a></li>
											<li><a href="">Videos and Film</a></li>
											<li><a href="">Data Sources</a></li>
											<li><a href="">Federal Depository Library Program (FDLP)</a></li>
											<li><a href="">Maps and Government Information</a></li>
											<li><a href="">Music Scores and Sheet Music</a></li>
											<li><a href="">Newspapers</a></li>
											<li><a href="">HathiTrust</a></li>
										</ul>
									</li>
									<li class="text-column">
										<div class="mega-sub-heading">Digital Library</div>
										<ul class="mega-menu-bulleted">
											<li><a href="">Digital Collections Repository</a></li>
											<li><a href="">SURFACE Institutional Repository</a></li>
											<li><a href="">Digital Exhibits</a></li>
										</ul>
									</li>
								</ul>
							</div>						
						</li>
						<li>
							<button aria-expanded="false" class="mega-menu-toggle">
								About Us
								<svg focusable="false" class="icon down"><use xlink:href="#icon-down-triangle"></use></svg>
								<svg focusable="false" class="icon up"><use xlink:href="#icon-up-triangle"></use></svg>
							</button>
							<div class="mega-sub-menu" tabindex="-1">
								<ul>
									<li class="image-column">
										<a href="">
											<img src="https://loremflickr.com/180/100/cat?random=4" alt="random cat"/>
											<div>Look a Cat!!!</div>
										</a>
									</li>
									<li class="image-column">
										<a href="">
											<img src="https://loremflickr.com/150/150/cat?random=5" alt="random cat"/>
											<div>Look a Cat!!!</div>
										</a>
									</li>
									<li class="text-column double">
											<ul class="mega-menu-bulleted">
											<li><a href="">Policies and Procedures</a></li>
											<li><a href="">Strategic Plan</a></li>
											<li><a href="">Publications</a></li>
											<li><a href="">Blog</a></li>
											<li><a href="">Staff Directory</a></li>
											<li><a href="">Equity, Diversity, Accessibility, and Inclusion</a></li>
											<li><a href="">News</a></li>
											<li><a href="">Events</a></li>
											<li><a href="">Exhibitions</a></li>
											<li><a href="">Job Opportunities</a></li>
											<li><a href="">Give to the Libraries</a></li>
											<li><a href="">Departments</a></li>
										</ul>
									</li>
								</ul>
							</div>
						</li>
					</ul>
				</nav>
			</div>
		</banner>
	</header>
	<main id="main" class="page-centered-content">
	
	
		<div id="notice">
			The following text is a DRAFT and currently being edited
		</div>
	
		<div id="main-content">
			<h1 id="page-title">Accessible Mega Menu</h1>
		</div>
		
		<p>
			This page provides an example of a mega menu with hover support that has been
			optimized for accessibility. The code is available for resuse as a 
			<a href="https://github.com/metageeky/mega-menu">public GitHub archive</a> with 
			<a href="https://github.com/metageeky/mega-menu/blob/main/css/mega-menu-styles.css">css/mega-menu-styles.css</a> 
			and 
			<a href="https://github.com/metageeky/mega-menu/blob/main/js/mega-menu.js">js/mega-menu.js</a> 
			being the core files. 
		</p>
		
		<section aria-labelledby="Specifications">
			<div class="header-anchor">
				<h2 id="Specifications">
					Design Specifications
				</h2>
				<a href="#Specifications">
					<svg><use xlink:href="#icon-link"></use></svg>
					<span>Design Specifications Link</span>
				</a>
			</div>
		
			<p>
				The Accessible Mega Menu was designed to meet the specific needs of a website 
				redesign. A mega menu approach was desired as the site is a library and thus 
				offers a variety of services that need to be discoverable by users without
				having to do deep diving. The current menu structure reflects a draft of the
				proposed site "structure."
			</p>
			
			<p>
				The mega menu design request specified the following features:
			</p>
			<ul>
				<li>
					The overall menu conforms and possibly exceeds accessibility standards.
				</li>
				<li>
					The mega menu includes a mobile-friendly mode that is not necesarily the
					same as the "desktop" mode. 
				</li>
				<li>
					In desktop mode ONLY, the menus open on hover to increase discoverability.
				</li>
				<li>
					When in desktop mode, all toggle buttons are arranged horizontally without
					any wrapping nor should it trigger any horizontal scrolling.
				</li>
				<li>
					The individual mega menus consist of up to 4 columns that are either
					an image link or a column of text links. The text link columns may 
					have textual headings for easier cognition. Text links may span more
					than one column.
				</li>
			</ul>
		</section>
		
		<section aria-labelledby="HTML">
			<div class="header-anchor">
				<h2 id="HTML">
					HTML Structure
				</h2>
				<a href="#HTML">
					<svg><use xlink:href="#icon-link"></use></svg>
					<span>HTML Structure Link</span>
				</a>
			</div>
			
			<p> 
				The overall structure of the mega menu is a collection of basic
				disclosure patterns consisting of unordered lists and buttons. 
			</p>
			
			<details>
				<summary>
					Stacked Disclosure HTML
				</summary>
			
<pre><code class="language-html">&lt;h2 id="main-nav-heading" class="offscreen"&gt;
&lt;nav class="mega-menu" aria-labelledby="main-nav-heading" data-menu-state="closed" data-responsive-width="900px"&gt;
  &lt;button class="responsive-toggle" aria-expanded="false"&gt;
    &lt;svg focusable="false" &gt;&lt;use xlink:href="#icon-menu"&gt;&lt;/use&gt;&lt;/svg&gt;
    Menu
  &lt;/button&gt;
  &lt;ul&gt;
    &lt;li&gt;
      &lt;button aria-expanded="false" class="mega-menu-toggle"&gt;
        Services and Support
        &lt;svg focusable="false" class="icon down"&gt;&lt;use xlink:href="#icon-down-triangle"&gt;&lt;/use&gt;&lt;/svg&gt;
        &lt;svg focusable="false" class="icon up"&gt;&lt;use xlink:href="#icon-up-triangle"&gt;&lt;/use&gt;&lt;/svg&gt;
      &lt;/button&gt;
      &lt;div class="mega-sub-menu" tabindex="-1"&gt;
        &lt;ul&gt;
          &lt;li class="image-column"&gt;
            &lt;a href=""&gt;
              &lt;img src="..." alt="..."/&gt;
              &lt;div&gt;Image Link Heading&lt;/div&gt;
            &lt;/a&gt;
          &lt;/li&gt;
          &lt;li class="text-column"&gt;
             &lt;div class="mega-sub-heading"&gt;Optional list heading&lt;/div&gt;
             &lt;ul class="mega-menu-bulleted"&gt;
               &lt;li&gt;&lt;a href="..."&gt;Link text&lt;a&gt;&lt;/li&gt;
               ...
             &lt;ul&gt;
          &lt;/li&gt;
          &lt;li class="text-column double"&gt;
             &lt;div class="mega-sub-heading"&gt;Optional list heading&lt;/div&gt;
             &lt;ul class="mega-menu-bulleted"&gt;
               &lt;li&gt;&lt;a href="..."&gt;Link text&lt;a&gt;&lt;/li&gt;
               ...
             &lt;ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/div&gt;&lt;!-- End sub-menu --&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;button aria-expanded="false" class="mega-menu-toggle"&gt;...&lt;/button&gt;
      &lt;div class="mega-sub-menu" tabindex="-1"&gt;...&lt;/div&gt;
    &lt;/li&gt;
	...
  &lt;/ul&gt;
&lt;/nav&gt;</code></pre>
</details>
		
			<p>
				Within a sub-menu, there are four equal-width columns (25%) available. Columns
				can involve an image or text. Text columns can also be marked as a double
				column in that the list of items will be displayed across two columns 
				(50% of the width). CSS is used to prevent individual list items from breaking
				across the columns. 
			</p>
		
		</section>

		<section aria-labelledby="AccessibilityConcerns">
			<div class="header-anchor">
				<h2 id="AccessibilityConcerns">
					Accessibility Concerns
				</h2>
				<a href="#AccessibilityConcerns">
					<svg><use xlink:href="#icon-link"></use></svg>
					<span>Accessibility Concerns Link</span>
				</a>
			</div>
			<p>
				The mega menu is a collection of drop down menus for navigation. 
				As such, each dropdown should thus mostly follow the recommended 
				practices for the 
				<a href="https://www.w3.org/TR/wai-aria-practices-1.1/#disclosure">WAI-ARIA
				disclosure pattern</a>. The example provided for 
				<a href="https://www.w3.org/TR/wai-aria-practices-1.1/examples/disclosure/disclosure-navigation.html">navigation
				menu examples via disclosures</a> can be used. In terms of accessibility 
				features, the following subsections discuss what is needed for proper 
				implementation.
			</p>
			<p>
				Importantly, note that this is <strong>NOT</strong> an application 
				menu and that pattern should not be used. Application menus are for
				web applications such as Google Docs. This is for navigation between
				pages on the web. As such is does <strong>NOT</strong> use the 
				ARIA roles of either <code class="language-html">menu</code> or
				<code class="language-html">menuitem</code>.
			</p>
			
			<div class="header-anchor">
				<h3 id="InteractionLogic">
					Hover Interaction Logic in Desktop Mode
				</h3>
				<a href="#InteractionLogic">
					<svg><use xlink:href="#icon-link"></use></svg>
					<span>Hover Interaction Logic Link</span>
				</a>
			</div>
			<p>
				The design HTML for this mega menu adds the requirement
				for the dropdown menus to open on hover interaction when in
				desktop mode. To support only having hover in desktop mode, 
				the <code class="language-html">&lt;nav&gt;</code> that is
				the mega menu should set the attributes
				<code class="language-html">data-responsive-width</code> to
				the minimum width (in pixels) that the desktop mode occurs. The 
				<i>mega-menu.js</i> code utilizes this value when determining
				interactivity for any event. Do not include units when
				assigning the attribute.
			</p>
			<p> 
				To support accessibility, the desktop view must properly balance
				the interactions between opening the menus via hover or direct 
				manipulation. To accomplish this, the mega menu should be considered
				as existing in one of three states:
			</p>
			<dl>
				<dt>Closed</dt>
				<dd>No sub-menu in the mega menu is opened.</dd>
				
				<dt>Hover</dt>
				<dd>A sub-menu is currently opened via hover interaction (the 
					cursor is hovering over a submenu toggle button or a submenu).
				</dd>
				
				<dt>Focus</dt>
				<dd>A sub-menu is open <strong>and</strong> focus is currently 
					within the mega menu on either a link or toggle button.
				</dd>
			</dl>
				
			<p>
				The accompanying CSS and JS files track this state
				in the attribute <code class="language-html">data-menu-state</code> 
				in the <code class="language-html">&lt;nav&gt;</code> element for
				the mega menu. In general, focus takes priority over the hover state. 
				Once the menu enters the focus state, hover has no effect until the 
				menu returns to the closed state. The following table describes the 
				various state transitions the desktop mega menu should take.
			</p>
			
			<table>
				<thead>
					<tr>
						<th>Current State</th>
						<th>Interaction</th>
						<th>Result</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Closed</td>
						<td>Cursor hovers over a toggle button</td>
						<td>
							<p>State changes to Hover</p>
							<p>
								Set <code class="language-html">aria-expanded="true"</code> 
								on the hovered toggle button
							</p>
							<p>Associated sub-menu is shown</p>
						</td>
					</tr>
					<tr>
						<td>Closed</td>
						<td>A toggle button receives a click event</td>
						<td>
							<p>State changes to Focus</p>
							<p>
								Set <code class="language-html">aria-expanded="true"</code> 
								on the clicked toggle button
							</p>
							<p>Associated sub-menu is shown</p>
						</td>
					</tr>
					<tr>
						<td>Hover</td>
						<td>Cursor moves from toggle button to opened sub-menu 
							or opened sub-menu to its associated toggle button.
						</td>
						<td>
							<p>No changes</p>
						</td>
					</tr>
					<tr>
						<td>Hover</td>
						<td>
							Cursor moves from opened sub-menu or its associated 
							toggle button to a different toggle button
						</td>
						<td>
							<p>State remains Hover</p>
							<p>
								Set <code class="language-html">aria-expanded="false"</code> 
								on the previously opened toggle button and hide the
								opened sub-menu
							</p>
							<p>
								Set <code class="language-html">aria-expanded="true"</code> 
								on the newly hovered dropdown button and show the 
								associated sub-menu
							</p>
						</td>
					</tr>
					<tr>
						<td>Hover</td>
						<td>
							The toggle button with <code class="language-html">aria-expanded="true"</code>
							experiences a click event
						</td>
						<td>
							<p>State changes to Focus</p>
							<p>
								No other changes
							</p>
						</td>
					</tr>
					<tr>
						<td>Hover</td>
						<td>
							A link in the opened sub-menu receives focus
						</td>
						<td>
							<p>State changes to Focus</p>
							<p>
								No other changes
							</p>
						</td>
					</tr>
					<tr>
						<td>Focus</td>
						<td>
							<p>
								User clicks on a non-interactive part of the opened sub-menu
							</p>
						</td>
						<td>
							<p>State changes to Focus</p>
							<p>Focus is moved to the opened sub-menu's toggle button</p>
						</td>
					</tr>
					<tr>
						<td>Hover</td>
						<td>
							<kbd>Escape</kbd> key is pressed
						</td>
						<td>
							<p>State changes to Closed</p>
							<p>
								The relevant toggle buttons sets <code class="language-html">aria-expanded="false"</code> 
							</p>
							<p>
								The opened sub menus closes
							</p>
						</td>
					</tr>
					<tr>
						<td>Focus</td>
						<td>
							<kbd>Escape</kbd> key is pressed
						</td>
						<td>
							<p>State changes to Closed</p>
							<p>
								All toggle buttons set <code class="language-html">aria-expanded="false"</code> 
							</p>
							<p>
								Any opened sub menus disappear
							</p>
							<p>
								If focus was within a sub-menu, focus is moved to the toggle button
								associated with the sub-menu
							</p>
						</td>
					</tr>
					<tr>
						<td>Focus</td>
						<td>
							A toggle button or opened sub-menu is hovered over
						</td>
						<td>
							<p>No changes</p>
						</td>
					</tr>
					<tr>
						<td>Focus</td>
						<td>
							The toggle button with <code class="language-html">aria-expanded="true"</code> 
							receives a click event
						</td>
						<td>
							<p>State changes to Closed</p>
							<p>Toggle button sets <code class="language-html">aria-expanded="false"</code></p>
							<p>Opened sub-menu is closed</p>
						</td>
					</tr>
					<tr>
						<td>Focus</td>
						<td>
							A toggle button with <code class="language-html">aria-expanded="false</code> 
							receives a click event
						</td>
						<td>
							<p>State remains Focus</p>
							<p>
								Set <code class="language-html">aria-expanded="false"</code> 
								on the previously opened toggle button and hide the
								opened sub-menu
							</p>
							<p>
								Set <code class="language-html">aria-expanded="true"</code> 
								on the newly hovered dropdown button and show the 
								associated sub-menu
							</p>
						</td>
					</tr>
					<tr>
						<td>Focus</td>
						<td>
							<p>
								Focus moves to any part of the mega menu: links in an opened sub-menu or any toggle button.
							</p>
						</td>
						<td>
							<p>No changes</p>
						</td>
					</tr>
					<tr>
						<td>Focus</td>
						<td>
							<p>
								Focus moves outside of the mega menu
							</p>
						</td>
						<td>
							<p>State changes to Closed</p>
							<p>Toggle button sets <code class="language-html">aria-expanded="false"</code></p>
							<p>Opened sub-menu is closed</p>
						</td>
					</tr>
					<tr>
						<td>Focus</td>
						<td>
							<p>
								User clicks on a non-interactive part of the opened sub-menu.
							</p>
						</td>
						<td>
							<p>State remains Focus</p>
							<p>Sub-menu remains open</p>
							<p>Focus remains where it was</p>
						</td>
					</tr>					
					<tr>
						<td>Focus</td>
						<td>
							<p>
								User clicks outside of the opened sub-menu on a non-interactive element.
							</p>
						</td>
						<td>
							<p>State changes to Closed</p>
							<p>Toggle button sets <code class="language-html">aria-expanded="false"</code></p>
							<p>Opened sub-menu is closed</p>
							<p>Focus is moved to the browser's default</p>
						</td>
					</tr>
					<tr>
						<td>Focus</td>
						<td>
							<p>
								User moves to a different browser tab or application.
							</p>
						</td>
						<td>
							<p>State remains Focus</p>
							<p>Sub-menu remains open</p>
							<p>Focus remains where it was</p>
						</td>
					</tr>
				</tbody>
			</table>
			
			
			<div class="header-anchor">
				<h3 id="KeyboardSupport">
					Keyboard Support Logic
				</h3>
				<a href="#KeyboardSupport">
					<svg><use xlink:href="#icon-link"></use></svg>
					<span>Keyboard Support Link</span>
				</a>
			</div>
			<p>
				For keyboard support, the mega menu should provide the following
				interactivity in both mobile and desktop settings: 
			</p>
			
			<table>
				<thead>
					<tr>
						<th>Key</th>
						<th>Function</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th>
							<kbd>Tab</kbd> or <br> 
							<kbd>Shift</kbd> + <kbd>Tab</kbd>
						</th>
						<td>
							Move keyboard focus among top-level buttons, and if 
							a dropdown is open, move the focus into and through 
							the links in the dropdown.
						</td>
					</tr>
					<tr>
						<th>
							<kbd>Space</kbd> 
						</th>
						<td>
							If focus is on a disclosure button, activates the button 
							and toggles the visibility of the dropdown.
						</td>
					</tr>
					<tr>
						<th>
							<kbd>Enter</kbd>
						</th>
						<td>
							<p>	If focus is on a disclosure button, activates the button 
								and toggles the visibility of the dropdown.</p>
							<p>If focus is on a link, activates the focused link.</p>
						</td>
					</tr>
					<tr>
						<th>
							<kbd>Escape</kbd>
						</th>
						<td>
							If a dropdown is open, closes it. If the focus was within the
							opened dropdown, set focus on the button that controls that 
							dropdown.
						</td>
					</tr>
				</tbody>
			</table>
			
			<p>
				Although the disclosure pattern lists the arrow keys, <kbd>Home</kbd>,
				and <kbd>End</kbd> keys as optional means of interactions, we do not
				recommend their use here. These interaction options are not implemented
				consistently. If they are to be added, we would need to make sure 
				<strong>ALL</strong> disclosures on library sites also provide them.
			</p>
			<p>
				Additionally, <kbd>space</kbd> and <kbd>enter</kbd> natively triggers
				the <i>click</i> event for buttons, and <kbd>enter</kbd> natively triggers 
				<i>click</i> for links (i.e., <code class="language-html">&lt;a&gt;</code>). 
				No keyboard event listeners are needed for them. 
			</p>
				
			
			<div class="header-anchor">
				<h3 id="ARIA">
					ARIA
				</h3>
				<a href="#ARIA">
					<svg><use xlink:href="#icon-link"></use></svg>
					<span>ARIA Link</span>
				</a>
			</div>
			<p>
				In terms of ARIA support, the only required bit of ARIA is 
				<code class="language-html">aria-expanded="true/false"</code>
				on the toggle buttons for the dropdown menus and for opening the
				responsive mode menu button. For each such
				button, <code class="language-html">aria-expanded</code> should
				be set to <i>false</i> if the associated dropdown menu is closed.
				Whenever the associated menu is opened, whether by hover or click, 
				the value should be set to <i>true</i>.
			</p>
			<p>
				The disclosure pattern does suggest two additional ARIA attributes:
				<code class="language-html">aria-controls</code> and 
				<code class="language-html">aria-current</code> but neither are 
				recommended here. The first, <code class="language-html">aria-controls</code>,
				is not widely supported by screen readers currently due to difficulties
				in implementation. Current recommended practice based on testing suggests
				that <code class="language-html">aria-controls</code> either provides
				no benefit or causes additional problems and should thus be avoided.
			</p>
			<p>
				<code class="language-html">aria-current</code> is well supported among
				screen readers currently. Setting <code class="language-html">aria-current="page"</code>
				on a link will inform screen readers that the link is to the page the browser
				is currently at. CSS can then be used to indicate that as well to sighted users.
				Its utility, however, is debatable in a dropdown menu situation as no indication
				is provided in the toggle buttons. Therefore, adding the code to support and properly
				update its usage is not required or recommended for this mega menu in either desktop
				or responsive mode.
			</p>
			
			
			<div class="header-anchor">
				<h3 id="FeaturesAccessibility">
					Additional Features for Accessibility
				</h3>
				<a href="#FeaturesAccessibility">
					<svg><use xlink:href="#icon-link"></use></svg>
					<span>Additional Features for Accessibility Link</span>
				</a>
			</div>
			<p>
				In addition to the above items, the following features are also
				provided to enhance the accessibility experience:
			</p>
			<ul>
				<li>
					In desktop mode, whenever <code class="language-html">data-menu-state</code> 
					changes to focus, the toggle button for the responsive menu (<code class="language-html">&lt;button class="responsive-toggle"&gt;</code>)
					has its attribute of <code class="language-html">aria-expanded</code> set to 
					<code class="language-html">"true"</code>.
					This means that if the window is resized and the menu switches to responsive mode, 
					the same sub-menu remains open and available.
				</li>
				<li>
					In responsive mode, only one sub-menu can be opened at a time.
					This replicates the desktop mode and allows for seamless changes
					in terms of going between either mode.
				</li>
				<li>
					In desktop mode, opened sub-menus have an invisible cushion on 
					their left, right, and bottom to reduce accidentally hovering off
					the edge of a menu. This is provided by using the 
					<code class="language-css">:before</code> and 
					<code class="language-css">:after</code> in CSS on the sub-menus.
				</li>
				<li>
					In desktop mode, a <i>hover intent</i> is applied to hovering over
					the sub-menu toggle buttons to prevent excessive flashing if you 
					hover quickly over the buttons. This is provided via the small 
					JavaScript library at 
					<a href="https://github.com/tristen/hoverintent">hoverintent.js</a>.
				</li>
			</ul>
		</section>



		<section aria-labelledby="Acknowledgements">
			<div class="header-anchor">
				<h3 id="Acknowledgements">
					Acknowledgements
				</h3>
				<a href="#Acknowledgements">
					<svg><use xlink:href="#icon-link"></use></svg>
					<span>Acknowledgements Link</span>
				</a>
			</div>
			<p>
				Much thanks go to the many fruitful conversations and feedback found on the 
				<a href="https://web-a11y.slack.com">Web A11Y slack</a>. This project also
				makes use of the open source 
				<a href="https://github.com/tristen/hoverintent">hoverintent</a> library.
			</p>
		</section>
		
	</main>

	<footer aria-label="Additional Information">
		<div class="page-centered-content">
			<img id="avatar" src="https://metageeky.github.io/resources/avatar-bg.png" alt="Cartoon avatar of a bespectacled brunette geek girl in a green hoodie in front of a bookcase">
			<div>
				a metageeky production
			</div>
			<div class="spacer"></div>
			<a class="social-media" href="https://twitter.com/metageeky">
				<svg><use xlink:href="#icon-twitter"></use></svg>
				<span>twitter</span>
			</a>
			<a class="social-media" href="https://github.com/metageeky">
				<svg><use xlink:href="#icon-github"></use></svg>
				<span>github</span>
			</a>
		</div>
	</footer>

</body>
</html>